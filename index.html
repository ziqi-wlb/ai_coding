<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>月光生活家 - 记账应用</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <h1>🌙 月光生活家</h1>
            <p class="subtitle">记录每一份美好</p>
        </header>

        <!-- Navigation -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-tab="add">记账</button>
            <button class="nav-tab" data-tab="budget">预算</button>
            <button class="nav-tab" data-tab="stats">统计</button>
            <button class="nav-tab" data-tab="insights">dots-llm</button>
            <button class="nav-tab" data-tab="history">历史</button>
        </nav>

        <!-- Add Expense Tab -->
        <div class="tab-content active" id="add">
            <div class="add-expense-form">
                <h2>快速记账</h2>
                <form id="expenseForm">
                    <div class="form-group">
                        <label for="amount">金额</label>
                        <input type="number" id="amount" placeholder="0.00" step="0.01" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="category">分类</label>
                        <select id="category" required>
                            <option value="">选择分类</option>
                            <option value="餐饮">🍽️ 餐饮</option>
                            <option value="交通">🚗 交通</option>
                            <option value="购物">🛍️ 购物</option>
                            <option value="娱乐">🎮 娱乐</option>
                            <option value="医疗">🏥 医疗</option>
                            <option value="教育">📚 教育</option>
                            <option value="其他">📝 其他</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="date">日期</label>
                        <input type="date" id="date" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="note">备注</label>
                        <textarea id="note" placeholder="记录心情或吐槽..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="imageUpload">上传图片</label>
                        <input type="file" id="imageUpload" accept="image/*" multiple>
                        <div class="image-preview" id="imagePreview"></div>
                    </div>
                    
                    <div class="form-group">
                        <label>今天的心情</label>
                        <div class="mood-options">
                            <button type="button" class="mood-btn" data-mood="happy">😊 开心</button>
                            <button type="button" class="mood-btn" data-mood="sad">😢 难过</button>
                            <button type="button" class="mood-btn" data-mood="angry">😠 生气</button>
                            <button type="button" class="mood-btn" data-mood="excited">🤩 兴奋</button>
                            <button type="button" class="mood-btn" data-mood="worried">😰 担心</button>
                            <button type="button" class="mood-btn" data-mood="calm">😌 平静</button>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="moodNote">心情备注</label>
                        <textarea id="moodNote" placeholder="记录今天的心情和感受..."></textarea>
                    </div>
                    
                    <button type="submit" class="submit-btn">记录消费</button>
                </form>
            </div>
        </div>

        <!-- History Tab -->
        <div class="tab-content" id="history">
            <h2>消费历史</h2>
            <div class="history-controls">
                <div class="search-box">
                    <input type="text" id="historySearch" placeholder="搜索备注或分类...">
                </div>
                <div class="filter-controls">
                    <select id="categoryFilter">
                        <option value="">所有分类</option>
                        <option value="餐饮">🍽️ 餐饮</option>
                        <option value="交通">🚗 交通</option>
                        <option value="购物">🛍️ 购物</option>
                        <option value="娱乐">🎮 娱乐</option>
                        <option value="医疗">🏥 医疗</option>
                        <option value="教育">📚 教育</option>
                        <option value="旅游">✈️ 旅游</option>
                        <option value="美妆护肤">💄 美妆护肤</option>
                        <option value="其他">📝 其他</option>
                    </select>
                    <select id="dateFilter">
                        <option value="">所有时间</option>
                        <option value="today">今天</option>
                        <option value="week">本周</option>
                        <option value="month">本月</option>
                    </select>
                </div>
            </div>
            <div class="history-list" id="historyList">
                <!-- History items will be displayed here -->
            </div>
        </div>

        <!-- Statistics Tab -->
        <div class="tab-content" id="stats">
            <h2>资金流向</h2>
            <div class="stats-container">
                <div class="chart-container">
                    <canvas id="categoryChart"></canvas>
                </div>
                <div class="category-list" id="categoryList">
                    <!-- Dynamic category list will be inserted here -->
                </div>
            </div>
            
            <h2>消费趋势</h2>
            <div class="trend-controls">
                <button class="trend-btn active" data-period="7">最近7天</button>
                <button class="trend-btn" data-period="30">最近30天</button>
            </div>
            <div class="chart-container">
                <canvas id="trendChart"></canvas>
            </div>
        </div>

        <!-- Dots AI Tab -->
        <div class="tab-content" id="insights">
            <h2>dots-llm - 心情消费分析</h2>
            <div class="mood-stats-container">
                <div class="mood-summary" id="moodSummary">
                    <!-- Mood summary will be displayed here -->
                </div>
                <div class="chart-container">
                    <canvas id="moodExpenseChart"></canvas>
                </div>
                <div class="mood-insights" id="moodInsights">
                    <!-- Mood insights will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Budget Tab -->
        <div class="tab-content" id="budget">
            <h2>预算管理</h2>
            <div class="budget-form">
                <h3>设置预算</h3>
                <form id="budgetForm">
                    <div class="form-group">
                        <label for="budgetCategory">分类</label>
                        <select id="budgetCategory" required>
                            <option value="">选择分类</option>
                            <option value="餐饮">🍽️ 餐饮</option>
                            <option value="交通">🚗 交通</option>
                            <option value="购物">🛍️ 购物</option>
                            <option value="娱乐">🎮 娱乐</option>
                            <option value="医疗">🏥 医疗</option>
                            <option value="教育">📚 教育</option>
                            <option value="旅游">✈️ 旅游</option>
                            <option value="美妆护肤">💄 美妆护肤</option>
                            <option value="其他">📝 其他</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="budgetAmount">预算金额</label>
                        <input type="number" id="budgetAmount" placeholder="0.00" step="0.01" required>
                    </div>
                    <button type="submit" class="submit-btn">设置预算</button>
                </form>
            </div>
            
            <div class="budget-list" id="budgetList">
                <!-- Budget items will be displayed here -->
            </div>
        </div>

    </div>

    <!-- Image Modal -->
    <div class="image-modal" id="imageModal">
        <button class="close-modal" onclick="app.closeImageModal()">×</button>
        <img id="modalImage" src="" alt="">
    </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
